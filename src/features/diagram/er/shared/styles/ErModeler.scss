/* ErModeler.css - Estilos específicos para elementos ER */
/* TEMPORARIAMENTE COMENTADO PARA TESTAR: @import './ErVariables'; */

/* Sobrescrever alguns estilos do bpmn-js para ER */
.djs-palette {
  background-color: #ffffff;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

/* Ocultar palette quando em modo declarativo */
.er-modeler.declarative-mode .djs-palette {
  opacity: 0;
  transform: translateX(-100%);
  pointer-events: none;
}

/* Layout com painel lateral */
.modeler-content {
  display: flex;
  height: 100%;
}

.modeler-container.with-syntax-panel {
  margin-left: 0; /* Remove margem padrão da palette quando painel está visível */
}

/* Ícones ER removidos - usar os do ErPalette.css */

/* Esconder elementos BPMN não necessários */
.djs-palette [data-action^="create.start-event"],
.djs-palette [data-action^="create.intermediate-event"],
.djs-palette [data-action^="create.end-event"],
.djs-palette [data-action^="create.gateway"],
.djs-palette [data-action^="create.task"],
.djs-palette [data-action^="create.subprocess"],
.djs-palette [data-action^="create.participant"],
.djs-palette [data-action^="create.group"] {
  display: none !important;
}

/* Manter apenas ferramentas básicas */
.djs-palette .entry[title="Activate the hand tool"],
.djs-palette .entry[title="Activate the lasso tool"],
.djs-palette .entry[title="Activate the create/remove space tool"],
.djs-palette .entry[title="Activate the global connect tool"] 
  /* Mantém visível */


/* Canvas com grid visual moderno */
.diagram-editor.er-modeler .djs-container {
  background-color: #fefefe !important;
  background-image: 
    /* Grid primário (20px) - linhas principais */
    linear-gradient(rgba(59, 130, 246, 0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.08) 1px, transparent 1px),
    /* Grid secundário (100px) - linhas de destaque */
    linear-gradient(rgba(59, 130, 246, 0.15) 2px, transparent 2px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.15) 2px, transparent 2px) !important;
  background-size: 
    20px 20px,
    20px 20px,
    100px 100px,
    100px 100px !important;
  background-position: 
    0 0,
    0 0,
    0 0,
    0 0 !important;
}

/* Sombras suaves para elementos ER */
.diagram-editor.er-modeler .djs-element {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)) drop-shadow(0 1px 2px rgba(0, 0, 0, 0.06)) !important;
  transition: filter 0.2s ease !important;
  caret-color: transparent;
}

/* Elementos ER selecionados */
.diagram-editor.er-modeler .djs-element.selected {
  filter: drop-shadow(0 4px 8px rgba(59, 130, 246, 0.2)) drop-shadow(0 2px 4px rgba(59, 130, 246, 0.1)) !important;
  caret-color: transparent;
}

/* Forçar outline losangular para elementos Relationship */
.diagram-editor.er-modeler .djs-element.selected .djs-outline {
  stroke: #3b82f6 !important;
  stroke-width: 3px !important;
}

/* Outline customizado será tratado pelo ErOutlineProvider */

/* Conexões ER com hover effects - MÁXIMA PRIORIDADE */
.diagram-editor.er-modeler .djs-connection .djs-visual path,
.diagram-editor.er-modeler .djs-connection .djs-visual > path,
.er-modeler .djs-connection .djs-visual path,
.er-modeler .djs-connection .djs-visual > path {
  stroke: #000000 !important; /* Cor preta padrão - forçar para garantir visibilidade */
  stroke-width: 2px !important;
  transition: stroke 0.2s ease, stroke-width 0.2s ease !important;
  marker-end: none !important; /* Remover setas padrão */
  opacity: 1 !important; /* Garantir que não está invisível */
  display: block !important; /* Garantir que não está oculto */
  fill: none !important; /* Garantir que não tem preenchimento */
  visibility: visible !important; /* Forçar visibilidade */
}

/* Sobrescrever qualquer estilo declarativo que possa afetar conexões ER */
.er-modeler .djs-connection[data-element-id*="Flow"] .djs-visual path,
.er-modeler .djs-connection[data-element-id*="SequenceFlow"] .djs-visual path,
.er-modeler .djs-connection[data-element-id*="connection"] .djs-visual path {
  stroke: #000000 !important;
  stroke-width: 2px !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
}

/* Labels dos elementos ER */
.diagram-editor.er-modeler .djs-label {
  font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif !important;
  font-size: 14px !important;
  transition: font-weight 0.2s ease, text-shadow 0.2s ease !important;
}

/* Habilitar resize para elementos ER */
.diagram-editor.er-modeler .djs-resize-handle {
  visibility: visible !important;
  opacity: 1 !important;
  display: block !important;
  pointer-events: all !important;
  fill: #3b82f6 !important;
  stroke: #1d4ed8 !important;
  stroke-width: 1px !important;
  cursor: nw-resize !important;
}

.diagram-editor.er-modeler .djs-resize-handle:hover {
  fill: #1d4ed8 !important;
  stroke: #1e40af !important;
  transform: scale(1.2) !important;
}

/* Garantir que o overlay de redimensionamento seja visível */
.diagram-editor.er-modeler .djs-overlay {
  pointer-events: none !important;
}

.diagram-editor.er-modeler .djs-overlay .djs-resize-handle {
  pointer-events: all !important;
}

/* Esconder botão de expansão em containers CompositeAttribute */
.diagram-editor.er-modeler .djs-visual [data-marker="sub-process"] {
  display: none !important;
}

.diagram-editor.er-modeler .djs-visual .subprocess-marker {
  display: none !important;
}

/* Garantir espessura consistente de borda para elementos ER */
.diagram-editor.er-modeler .djs-shape .djs-visual > path,
.diagram-editor.er-modeler .djs-shape .djs-visual > rect,
.diagram-editor.er-modeler .djs-shape .djs-visual > ellipse {
  stroke-width: 2px !important; /* Força espessura consistente */
}